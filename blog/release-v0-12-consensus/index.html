<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>RGB smart contracts</title>
  <link rel="stylesheet" href="/tachyons-ext.css">
  <link rel="stylesheet" href="/fonts.css">
  <link rel="stylesheet" href="/front.css">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  <meta http-equiv="pragma" content="no-cache">
  
    <meta name="description" content="RGB consensus layer is released to production as version 0.12 reaches stability">

    <meta property="og:title" content="RGB v0.12 consensus release" />
    <meta property="og:type" content="article" />
        <meta property="og:article:author" content="Maxim Orlovsky" />
    
        <meta property="og:article:author" content="Olga Ukolova" />
    <meta property="og:article:published_time" content="2025-07-10" />
    <meta property="og:article:section" content="Blog" />
    <meta property="og:url" content="https://rgb.tech&#x2F;blog&#x2F;release-v0-12-consensus&#x2F;" />
    <meta property="og:image" content="https://rgb.tech/rgb-banner.png" />
    <meta name="twitter:card" content="summary_large_image">

    <meta property="og:description" content="RGB consensus layer is released to production as version 0.12 reaches stability">
    <meta property="og:site_name" content="RGB protocol">

    <meta name="twitter:site" content="@lnp_bp">

</head>

<body>
<nav class="flex flex-row justify-center justify-end-l items-center flex-wrap ph2 pl3-ns pr3-ns pb3">
  <div id="logo" class="flex-auto w-100 w-auto-l self-start self-center tc tl-l">
    <a href="/">
      <img alt="RGB Logo" src="/logo/rgb-symbol-color.svg">
    </a>
  </div>
  <ul class="nav list w-100 w-auto-l flex flex-none flex-row flex-wrap justify-center justify-end-l items-center pv2 ph0 ph4-ns">
    <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="/install">Install</a></li>
    <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="/learn">Learn</a></li>
    <!-- li class="tc pv2 ph2 ph4-ns flex-20-s">Tools</li -->
    <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="/governance">Governance</a></li>
    <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://t.me/rgbtelegram">Community</a></li>
    <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="/blog">Blog</a></li>
  </ul>
</nav>
<main>
  
<section class="section-white"><div>
    <header class="pb0">
        <h1 id="title">RGB v0.12 consensus release</h1>
        <p class="blog-date"><strong>2025-07-10</strong></p>
        <div class="highlight"></div>
    </header>

    <p>LNP/BP Standards Association presents the final production-ready release of the consensus layer
for the new generation of RGB smart contracts (version 0.12).</p>
<p>All RGB contract developers and issuers can now do contracts on testnet and bitcoin mainnet
using this consensus release.
For the sake of security and consistency of software across the ecosystem,
it is recommended to re-issue all previously issued contracts (made with pre-release versions)
using this final v0.12 consensus version.</p>
<p>This is a consensus layer release.
It will be followed by releases of the standard library and applications.
The consensus layer is unique among RGB libraries because it defines contract stability:
only changes at the consensus level can break backward compatibility for contracts.
Therefore, with this final v0.12 release, contracts are now forward-compatible.</p>
<hr />
<h2 id="what-s-new">What's new</h2>
<p>The version 0.12 of RGB represents a result of 8 months of protocol re-design,
aimed at the following:</p>
<ol>
<li>Make protocol ready for zk-STARK compression;</li>
<li>Simplify the protocol as much as possible,
reducing any potential attack surface and helping protocol adoption;</li>
<li>Ensure security of the protocol with thorough unit and integration test coverage,
including tests for potential attacks;</li>
<li>Make protocol fully production-ready by freezing consensus level changes and ensuring robustness
and performance.</li>
</ol>
<h3 id="1-zk-starkky-rgb">1. zk-STARKky RGB</h3>
<p>The new RGB architecture for the first time introduces zk-AluVM, which is a compact and performant
Turing-complete zk-VM made for client-side validation.
While being universal, it offers a non-von-Neuman architecture with an extra-reduced instruction set,
made of just 40 instructions and provides read-once memory compatible with single-use seals.</p>
<p>The contract state was also transformed. Previously, RGB contracts had three variants of state data:
fungible (with Pedersen commitments and Bulletproofs), non-fungible structured state and binary
attachments. To make the contract state zk-compressible, version 12 unified state into a single
type, made of finite field elements.</p>
<p>The whole consensus validation was reduced to just a few hundred lines of code, which can be
represented as an arithmetic circuit for a zk prover, allowing recursive history compression.</p>
<p>All these changes not just make RGB ready for zk-STARK provers and verifiers, but also allow
use of RGB with the future client-side validation layer 1 codenamed <a href="https://github.com/LNP-BP/layer1">Prime</a>.</p>
<h3 id="2-protocol-simplification">2. Protocol simplification</h3>
<p>RGB so far has been notoriously infamous for the protocol complexity.
Version 0.12 should shift that impression, since most of the changes in it
were an actual simplification of the protocol.</p>
<p>Overall, we have achieved x4 reduction in the size of the consensus code and
x2 reduction in standard libraries, as well as a significant reduction in the number of data types,
and removal of ~30% of generic type parameters in the APIs.</p>
<p><img src="/blog/v0-12-consensus.png" alt="Consensus codebase" />
<img src="/blog/v0-12-std.png" alt="Standard libraries codebase" /></p>
<p>Such simplification provides several gains:</p>
<ul>
<li>much reduced attack surface;</li>
<li>better auditability;</li>
<li>better performance;</li>
<li>better developer experience;</li>
<li>which opens a way for building simpler UX with improved user experience.</li>
</ul>
<p>Below, we cover some of the technical details of the main simplifications
which has happened in v0.12.</p>
<h4 id="2-1-seal-unification">2.1. Seal unification</h4>
<p>RGB uses single-use seals, a cryptographic primitive, to prevent double-spending by "anchoring"
into a UTXO-based blockchain or a sidechain.</p>
<p>Previously, there were two different types of single-use seals, which can be used by an RGB contract:
so-called <em>tapret</em> and <em>opret</em>-based. <em>Tapret</em> seals can't be seen inside a bitcoin transaction,
but require a taproot wallet, which still is not fully supported by all exchanges,
hardware wallets or Lightning nodes. <em>Opret</em> is an answer to that; it utilizes old <code>OP_RETURN</code>s
to put a 32-byte commitment into a bitcoin transaction;
which has many drawbacks (higher transaction price), exposure to chain analysis, etc.,
but helps when a wallet or a user can't use taproot.</p>
<p>However, the presence of two distinct seal types, where a user chooses one of the variants,
had created tremendous complexity, both in code, APIs and in user experience,
and resulted in a large attack surface.</p>
<p>In v0.12 we found a beautiful way how to unify two distinct seal types into a single-one,
yet still supporting <code>OP_RETURN</code> fallback option.</p>
<h4 id="2-2-removal-of-pedersen-commitments-and-bulletproofs">2.2. Removal of Pedersen commitments and Bulletproofs</h4>
<p>Since the inception of RGB protocol, it was using confidential assets by Blockstream for providing
contracts with a fungible state. While the idea of confidential assets has been great,
it was lacking an efficient implementation, postponing use of RGB in production.</p>
<p>The problem was that the original Blockstream implementation of confidential assets for Liquid
(and the Elements project) used older range proofs instead of bulletproofs,
which are much larger and longer to validate.
On the other hand, Bulletproofs were never implemented for the Bitcoin SECP256K1 curve,
while the RGB community and devs have been waiting for this implementation for more than 5 years.</p>
<p>With the introduction of zkVM and zk-STARK compatibility, Bulletproofs and Pedersen commitments
have become unneeded, since zk-STARK can provide much better performance
and offers a range of ready-to-use implementations.</p>
<h4 id="2-3-state-unification">2.3. State unification</h4>
<p>With the removal of Pedersen commitments and Bulletproofs, and the introduction of zkVM,
we were able to simplify and unify the state of RGB contracts.
Previously, an RGB contract may have three forms of a state:
fungible, structured (non-fungible) and blob attachments.
In v0.12, this state is unified under a single state type, which, again,
reduces the codebase and the attack surface.</p>
<h4 id="2-4-no-more-schemata">2.4. No more schemata</h4>
<p>zk-AluVM has changed a lot: with zk-STARKs, we need to be able to represent everything in the
consensus in an arithmetized form.
Thus, we got rid of the old way of writing RGB contracts with schemata and unlocked the real
potential for smart contract programming with Turing-complete zk-AluVM assembly
and higher-level languages on top, like Contractum.</p>
<p>From the point of view of contract issuers, now, instead of importing schemata, interfaces and
other components, they will be using so-called issuers, provided by the contract developers.
The users will be also less confused with an obscure terminology.</p>
<h4 id="2-5-removed-interfaces-and-implementations">2.5. Removed interfaces and implementations</h4>
<p>The way how interfaces work was also fully refactored, mostly due to zkVM.
Most importantly, it has become much simpler.</p>
<p>Previously, software devs integrating RGB were lost in multiple types related to interfaces:
interfaces, standards, implementations, schemata, etc.
Many of them were also made with generic type parameters, which made it much harder to integrate
and fully support their functionality.</p>
<p>Now, with v0.12, the only thing a developer using RGB should know about is so-called contract <em>API</em>:
a simple non-generic object explaining to a wallet how to operate with a contract.</p>
<p>Interfaces are still present, but not in the standard library:
they live solely now in the world of Contractum language and are used only by contract developers,
and the Contractum compiler will be taking care of compiling them into the contract APIs.</p>
<h4 id="2-6-single-blockchain-protocols">2.6. Single-blockchain protocols</h4>
<p>Since v0.11, RGB supported multiple blockchains. In v0.12 we made it simpler: instead of allowing
a contract to operate on multiple blockchains, each blockchain will have its own version of the
contract, which significantly reduces possible attack surface and API complexity.</p>
<h4 id="2-7-no-more-blank-state-transitions">2.7. No more blank state transitions</h4>
<p>One of the concepts that were hard to grasp in RGB was the concept of blank state transitions.
In v0.12, because of new and better way to build contract API, they are gone.</p>
<h3 id="3-payment-improvements">3. Payment improvements</h3>
<h4 id="3-1-invoicing">3.1. Invoicing</h4>
<p>The invoices have become much richer:
they may specify any forms of a fungible- and non-fungible state
and allow providing more accessory information in a better structured way.</p>
<h4 id="3-2-multiple-asset-contracts">3.2. Multiple-asset contracts</h4>
<p>Contracts now may expose multiple tokens, which may interact,
and these tokens can be accessed independently or jointly via both invoices and APIs.</p>
<h4 id="3-3-payment-scripts">3.3. Payment scripts</h4>
<p>Version v0.12 for the first time introduces a concept of <em>payment scripts</em>,
which is a powerful tool helping to construct and execute complex payments,
which may include multiple beneficiaries, multiple contracts and even multiple consequent
transactions or a transaction graph.
The functionality helps in:</p>
<ul>
<li>multisig wallets;</li>
<li>coinjoins and payjoins;</li>
<li>transaction batching at aggregation in wallets and exchanges;</li>
<li>lighting channel operations;</li>
<li>future Ark applications.</li>
</ul>
<h4 id="3-4-re-org-support">3.4. Re-org support</h4>
<p>As any blockchain-based system, RGB depends on what happens there, and one of the main
issues with blockchain deep reorgs, which may lead to the loss of funds by the users.</p>
<p>The problem was never properly addressed in RGB,
until in 2024 we discovered a type of attack which can leverage even shallow reorgs.</p>
<p>For the version v0.12 we have developed and implemented a mathematical model,
formally proving how the system can be protected from such attacks,
even if multiple and deep re-orgs happen or got combined.</p>
<h3 id="4-performance">4. Performance</h3>
<p>Performance was one of the pain points of the past RGB release.
In version 0.12 we did a huge work to bring it up to the production requirements.</p>
<h4 id="4-1-consignment-streams">4.1. Consignment streams</h4>
<p>Transfer of client-side data during RGB payment is made in the form of a binary data sent
from a payer to a beneficiary, possibly via a relay.
These binary data packs are named <em>consignments</em>.</p>
<p>Before, consignments were distributed in the form of files,
and, before being validated and accepted, have to be fully read into memory by a receiver.
Since consignments may span multiple megabytes, this was putting high resource requirements
and made it nearly impossible to use hardware wallets for verification.</p>
<p>In v0.12 consignments have become streams, which are never put into the memory and are
validated on the go, as they are received,
not ever taking more than a few hundred bytes of memory (!!!).
This is much more suitable for mobile wallets, servers, and paves the way for the hardware wallet
applications.</p>
<h4 id="4-2-consignment-verification">4.2. Consignment verification</h4>
<p>It is not that the consignments are no more read into the memory;
during their validation, the RGB software doesn't make requests to a blockchain indexer.
Before, the consignment validation was slowed manifold due to the requests;
now, the blockchain index synchronization is separated from the consignment validation,
which became order of magnitude faster.</p>
<h4 id="4-3-contract-data-are-no-more-kept-in-memory">4.3. Contract data are no more kept in memory</h4>
<p>RGB runtime was also used to load and keep all the contracts and their data in the memory,
including the whole of the contract history.
This was boosting memory usage outside acceptable bounds, especially in server and mobile apps.</p>
<p>With v0.12, only used contracts are loaded, but even for them, only the index data and state
are kept in the memory and can be offloaded any time, contract-by-contract.
This reduced memory requirements several orders of magnitude.</p>
<h4 id="4-4-persistence-performance-boost-with-nosql">4.4. Persistence performance boost with NoSQL</h4>
<p>Last, but not least, we have integrated a dedicated append-only NoSQL embedded database to
keep the contract history.
Since the database was designed specifically for the client-side validation needs,
where we do not need some operations like deletion, and many data have a known fixed size,
its introduction has boosted performance, not just compared to v0.11,
but also compared to classical embedded NoSQL databases like Rust Sled and ReDB.</p>
<h3 id="5-test-coverage">5. Test coverage</h3>
<p>In version 0.10, RGB for the first time got a full integration test suite.
However, we understood that it is not enough: integration tests,
demonstrating just the typical happy-path or shallow attack scenarios are insufficient
to prove the security of the system.</p>
<p>Version 0.12 is the first version achieving full consensus test coverage not just with
integration, but also with unit tests, which also check known attack scenarios.
The unit test coverage has increased several folds
and exceeds 66.7% for all RGB abstraction levels, reaching &gt;75% in the consensus libraries.</p>
<p><img src="/blog/v0-12-tests.png" alt="Test coverage" /></p>
<hr />
<h2 id="using-the-release">Using the release</h2>
<p>The source code of the release is available on <a href="https://github.com/RGB-WG/rgb/tree/v0.12.0-rc.1.1">GitHub</a>.</p>
<p>Those power users who'd like to play with the command line
may install it either from the sourcecode or using Rust Cargo command</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">cargo</span><span> install rgb-wallet
</span></code></pre>
<p>Demo &amp; examples can be found here:</p>
<ul>
<li>https://github.com/RGB-WG/rgb/tree/v0.12.0/examples</li>
<li>https://github.com/RGB-WG/rgb-sandbox/blob/v0.12/demo.sh</li>
<li>https://github.com/pandora-prime/rgb-issuers/</li>
</ul>
<p>To start integrating RGB, please feel free to contract LNP/BP Standards Association
via e-mail info at lnp-bp dot org.</p>
<hr />
<h2 id="what-s-next">What's next</h2>
<ol>
<li>
<p>We plan to update <a href="https://rgb.tech">the website</a> and documentation on it in order to reflect all the changes.
This will be happening over the course of the next few weeks.</p>
</li>
<li>
<p>We will be supporting developers integrating RGB v0.12 into their products.
Once we see the ecosystem adoption, v0.12 release candidate will become a full release.</p>
</li>
<li>
<p>We expect the first products and assets using this version to be released during June.
While it is up to each company to decide when to launch their assets and apps
into the mainnet, we hope that will happen during the Summer 2025.</p>
</li>
<li>
<p>Once v0.12 gets to the mainnet and production, a new non-profit, named <strong>RGB Consortium</strong>
will be created by the companies using RGB in their products.
This organization will ensure the protocol stability and will take care of the codebase maintenance.</p>
</li>
</ol>
<hr />
<h2 id="acknowledgments">Acknowledgments</h2>
<p>The release and v0.12 was designed and implemented by Dr Maxim Orlovsky,
financed by <a href="https://pandoraprime.ch/">Pandora Prime Inc.</a>.
<a href="https://bitlightlabs.com/">Bitlight Labs</a>, as one of the major contributors, has completed the integral test coverage,
ensuring the protocol security and scaled community test.
The initial three months of development were also financed by <a href="https://fulgur.ventures/">Fulgur Ventures</a>.</p>

</div></section>

</main>

<footer><div class="w-100 mw-none ph3 mw8-m mw9-l center f3">
  <div class="flex flex-column flex-row-ns pv0-l">
    <div class="flex flex-column mw8 w-100 measure-wide-l pv2 pv5-m pv2-ns ph4-m ph4-l">
      <h4>Get help!</h4>
      <ul>
        <li><a href="http://rgbfaq.com">RGB FAQ</a></li>
        <li><a href="https://blackpaper.rgb.tech">White paper</a></li>
        <li><a href="/docs">Documentation</a></li>
        <li><a href="https://standards.lnp-bp.org">Standards</a></li>
      </ul>
    </div>
    <div class="flex flex-column mw8 w-100 measure-wide-l pv2 pv5-m pv2-ns ph4-m ph4-l">
      <h4>Terms and policies</h4>
      <ul>
        <li><a href="/policies/licenses">Licenses</a></li>
        <li><a href="/policies/logo-policy-and-media-guide/">Logo Policy and Media Guide</a></li>
        <li><a href="/policies/security">Security Disclosures</a></li>
        <li><a href="/policies/privacy-policy/">Privacy Notice</a></li>
      </ul>
    </div>
    <div class="flex flex-column mw8 w-100 measure-wide-l pv2 pv5-m pv2-ns ph4-m ph4-l">
      <h4>Social</h4>
      <div class="flex flex-row flex-wrap">
        <a href="https://twitter.com/lnp_bp"><img src="/social/twitter.svg" alt="twitter logo" title="Twitter"></a>
        <a href="https://www.youtube.com/LNP-BP"><img class="pv2" src="/social/youtube.svg" alt="youtube logo" title="YouTube"></a>
        <a href="https://reddit.com/r/RGB_protocol"><img src="/social/reddit.svg" alt="discord logo" title="Discord"></a>
        <a href="https://github.com/RGB-WG"><img src="/social/github.svg" alt="github logo" title="GitHub"></a>
      </div>
    </div>

  </div>
  <div class="attribution">
    <p>
      Maintained by the <a href="https://www.lnp-bp.org">LNP/BP Standards Association</a>. See a bug?
      <a href="https://github.com/RGB-WG/rgb.tech/issues/new">File an issue!</a>
    </p>
    <p>Uses layout &amp; styles from <a href="https://github.com/rust-lang/www.rust-lang.org" target="_blank">Rust Language website</a></p>
  </div>
</div>

</footer>
</body>

</html>
