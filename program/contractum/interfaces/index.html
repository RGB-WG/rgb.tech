<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>RGB smart contracts</title>
  <link rel="stylesheet" href="/tachyons-ext.css">
  <link rel="stylesheet" href="/fonts.css">
  <link rel="stylesheet" href="/front.css">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  <meta http-equiv="pragma" content="no-cache">
  
    <meta name="description" content="">

    <meta property="og:title" content="Contract interfaces" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://rgb.tech/rgb-banner.png" />
    <meta name="twitter:card" content="summary_large_image">

    <meta property="og:description" content="">
    <meta property="og:site_name" content="RGB protocol">

    <meta name="twitter:site" content="@lnp_bp">

</head>

<body>
<nav class="flex flex-row justify-center justify-end-l items-center flex-wrap ph2 pl3-ns pr3-ns pb3">
  <div id="logo" class="flex-auto w-100 w-auto-l self-start self-center tc tl-l">
    <a href="/">
      <img alt="RGB Logo" src="/logo/rgb-symbol-color.svg">
    </a>
  </div>
  <ul class="nav list w-100 w-auto-l flex flex-none flex-row flex-wrap justify-center justify-end-l items-center pv2 ph0 ph4-ns">
    <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="/install">Install</a></li>
    <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="/learn">Learn</a></li>
    <!-- li class="tc pv2 ph2 ph4-ns flex-20-s">Tools</li -->
    <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="/governance">Governance</a></li>
    <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://t.me/rgbtelegram">Community</a></li>
    <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="/blog">Blog</a></li>
  </ul>
</nav>
<main>
  
<section class="section-white">
    <div>
        <header class="pb0">
            <h1>Contract interfaces</h1>
            <div class="highlight"></div>
        </header>

        <p>But how the wallet makes the sense of the contract? RGB contract can do a lot of things, and if schema developers would need to do a separate wallet for each schema the entrance threshold would be too high. To avoid such situation a concept of <em>contract interface</em> was created. A <em>contract interface</em> is a standard way communicating with RGB Node asking it for a semantically-meaningful state and creating operations. Such concept of interface is similar to the concept of ERC standards and ABI files in Ethereum world; the most common interfaces are called "RGBxx" and are defined as a separate LNP/BP standards.</p>
<p>Here, instead of using existing interface standards we will create an interface for a generic fungible token from scratch to explain the way they work:</p>
<pre data-lang="haskell" style="background-color:#2b303b;color:#c0c5ce;" class="language-haskell "><code class="language-haskell" data-lang="haskell"><span>interface </span><span style="color:#d08770;">FungibleToken</span><span>:
</span><span>   global </span><span style="color:#d08770;">Ticker </span><span>-&gt; </span><span style="color:#d08770;">String </span><span style="color:#65737e;">-- this is similar to schema definition; in fact
</span><span>                           </span><span style="color:#65737e;">-- it is a requirement that the schema must provide
</span><span>                           </span><span style="color:#65737e;">-- a global state of the String type and link it to
</span><span>                           </span><span style="color:#65737e;">-- the &quot;Ticker&quot; name
</span><span>   global </span><span style="color:#d08770;">Name </span><span>-&gt; </span><span style="color:#d08770;">String
</span><span>
</span><span>   </span><span style="color:#65737e;">-- amount of the issued asset must be a owned state which should be
</span><span>   </span><span style="color:#65737e;">-- accessible to all contract participants, hence it is `public`
</span><span>   owned public </span><span style="color:#d08770;">Inflation </span><span>:: </span><span style="color:#d08770;">Zk64
</span><span>   owned </span><span style="color:#d08770;">Asset </span><span>:: </span><span style="color:#d08770;">Zk64
</span><span>
</span><span>   op </span><span style="color:#d08770;">Issue </span><span>:: </span><span style="color:#d08770;">Inflation </span><span>-&gt; [</span><span style="color:#d08770;">Asset</span><span>]?, </span><span style="color:#d08770;">Inflation</span><span>? </span><span style="color:#65737e;">-- and operations
</span><span>   op </span><span style="color:#d08770;">Transfer </span><span>:: {</span><span style="color:#d08770;">Asset</span><span>} -&gt; [</span><span style="color:#d08770;">Asset</span><span>]
</span><span>
</span><span style="color:#65737e;">-- Specific schema state may use different naming, for instance because a
</span><span style="color:#65737e;">-- schema can define multiple assets with different names; in that case we
</span><span style="color:#65737e;">-- will have multiple interface implementations referencing different state.
</span><span>implement </span><span style="color:#d08770;">FungibleToken</span><span> for </span><span style="color:#d08770;">DecentralizedIdentity
</span><span>   global </span><span style="color:#d08770;">Ticker </span><span>:= </span><span style="color:#d08770;">IOYTicker </span><span style="color:#65737e;">-- this creates a _binding_ of the state defined
</span><span>                              </span><span style="color:#65737e;">-- in the schema (*IOYTicker* in this case) to
</span><span>                              </span><span style="color:#65737e;">-- the interface
</span><span>   global </span><span style="color:#d08770;">Name </span><span>:= </span><span style="color:#d08770;">IOYName
</span><span>   owned </span><span style="color:#d08770;">Inflation </span><span>:= </span><span style="color:#d08770;">IOYIssue
</span><span>   owned </span><span style="color:#d08770;">Asset </span><span>:= </span><span style="color:#d08770;">IOYTokens
</span><span>   op </span><span style="color:#d08770;">Issue </span><span>:= </span><span style="color:#d08770;">Promise
</span><span>   op </span><span style="color:#d08770;">Transfer </span><span style="color:#65737e;">-- here we skip `:=` part since the interface operation name
</span><span>               </span><span style="color:#65737e;">-- matches the name used in the schema. In such cases we can
</span><span>               </span><span style="color:#65737e;">-- also skip the declaration at whole
</span></code></pre>
<p>RGB smart contract can implement multiple interfaces. In our case it would be
desirable to expose the identity information as well:</p>
<pre data-lang="haskell" style="background-color:#2b303b;color:#c0c5ce;" class="language-haskell "><code class="language-haskell" data-lang="haskell"><span>interface </span><span style="color:#d08770;">PgpIdentity
</span><span>  owned </span><span style="color:#d08770;">Identity </span><span>:: </span><span style="color:#d08770;">PgpKey
</span><span>  exec </span><span style="color:#d08770;">Revocation </span><span>:: old </span><span style="color:#d08770;">Identity </span><span>-&gt; new </span><span style="color:#d08770;">Identity
</span><span>
</span><span>implement </span><span style="color:#d08770;">PgpIdentity</span><span> for </span><span style="color:#d08770;">DecentralizedIdentity
</span><span>  </span><span style="color:#65737e;">-- we do not need to put anything here since schema state and operation
</span><span>  </span><span style="color:#65737e;">-- names matches interface requirements and the compiler is able to guess
</span><span>  </span><span style="color:#65737e;">-- the bindings
</span></code></pre>

    </div>
</section>

</main>

<footer><div class="w-100 mw-none ph3 mw8-m mw9-l center f3">
  <div class="flex flex-column flex-row-ns pv0-l">
    <div class="flex flex-column mw8 w-100 measure-wide-l pv2 pv5-m pv2-ns ph4-m ph4-l">
      <h4>Get help!</h4>
      <ul>
        <li><a href="http://rgbfaq.com">RGB FAQ</a></li>
        <li><a href="https://blackpaper.rgb.tech">White paper</a></li>
        <li><a href="/docs">Documentation</a></li>
        <li><a href="https://standards.lnp-bp.org">Standards</a></li>
      </ul>
    </div>
    <div class="flex flex-column mw8 w-100 measure-wide-l pv2 pv5-m pv2-ns ph4-m ph4-l">
      <h4>Terms and policies</h4>
      <ul>
        <li><a href="/policies/licenses">Licenses</a></li>
        <li><a href="/policies/logo-policy-and-media-guide/">Logo Policy and Media Guide</a></li>
        <li><a href="/policies/security">Security Disclosures</a></li>
        <li><a href="/policies/privacy-policy/">Privacy Notice</a></li>
      </ul>
    </div>
    <div class="flex flex-column mw8 w-100 measure-wide-l pv2 pv5-m pv2-ns ph4-m ph4-l">
      <h4>Social</h4>
      <div class="flex flex-row flex-wrap">
        <a href="https://twitter.com/lnp_bp"><img src="/social/twitter.svg" alt="twitter logo" title="Twitter"></a>
        <a href="https://www.youtube.com/LNP-BP"><img class="pv2" src="/social/youtube.svg" alt="youtube logo" title="YouTube"></a>
        <a href="https://reddit.com/r/RGB_protocol"><img src="/social/reddit.svg" alt="discord logo" title="Discord"></a>
        <a href="https://github.com/RGB-WG"><img src="/social/github.svg" alt="github logo" title="GitHub"></a>
      </div>
    </div>

  </div>
  <div class="attribution">
    <p>
      Maintained by the <a href="https://www.lnp-bp.org">LNP/BP Standards Association</a>. See a bug?
      <a href="https://github.com/RGB-WG/rgb.tech/issues/new">File an issue!</a>
    </p>
    <p>Uses layout &amp; styles from <a href="https://github.com/rust-lang/www.rust-lang.org" target="_blank">Rust Language website</a></p>
  </div>
</div>

</footer>
</body>

</html>
